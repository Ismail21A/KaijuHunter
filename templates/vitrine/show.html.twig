{% extends 'base.html.twig' %}

{% block title %}Vitrine #{{ vitrine.id }}{% endblock %}

{% block body %}
<div class="container py-4">

  {# Breadcrumb #}
  <nav aria-label="breadcrumb" class="mb-3">
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a href="{{ path('home') }}">Accueil</a>
      </li>
      {% if vitrine.owner %}
        <li class="breadcrumb-item">
          <a href="{{ path('app_member_show', { id: vitrine.owner.id }) }}">
            Espace de {{ vitrine.owner.email }}
          </a>
        </li>
      {% endif %}
      <li class="breadcrumb-item active" aria-current="page">
        Vitrine #{{ vitrine.id }}
      </li>
    </ol>
  </nav>

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h3 mb-0">Vitrine #{{ vitrine.id }}</h1>
    <span class="text-muted">
      Propri√©taire :
      {% if vitrine.owner %}
        {{ vitrine.owner.email }}
      {% else %}
        <em>inconnu</em>
      {% endif %}
    </span>
  </div>

  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h2 class="h5">Description</h2>
      <p class="mb-0">
        {{ vitrine.description ?: 'Aucune description' }}
      </p>
    </div>
  </div>

  <div class="d-flex justify-content-between align-items-center mb-2">
    <h2 class="h5 mb-0">Figures dans cette vitrine</h2>

    <a class="btn btn-sm btn-primary"
       href="{{ path('app_figure_new', { id: vitrine.id }) }}">
      + Ajouter une nouvelle figure
    </a>
  </div>

  {% if vitrine.figures is empty %}
    <div class="alert alert-info mt-3">
      Aucune figure dans cette vitrine pour le moment.
    </div>
  {% else %}

    {# Grid of cards #}
    <div class="row g-4 mt-2">
      {% for figure in vitrine.figures %}
        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
          <div class="card shadow-sm h-100">
            {% if figure.imageName %}
              <img 
                src="/uploads/figures/{{ figure.imageName }}"
                alt="{{ figure.name }}"
                class="card-img-top"
                style="height:180px; object-fit:cover;"
              >
            {% else %}
              <div class="d-flex align-items-center justify-content-center bg-light"
                   style="height:180px;">
                <span class="text-muted small">Aucune image</span>
              </div>
            {% endif %}

            <div class="card-body d-flex flex-column">
              <h5 class="card-title">{{ figure.name }}</h5>

              <a href="{{ path('app_figure_show', { id: figure.id }) }}"
                 class="btn btn-sm btn-outline-primary mt-auto">
                Voir
              </a>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>

  {% endif %}

</div>
{% endblock %}
